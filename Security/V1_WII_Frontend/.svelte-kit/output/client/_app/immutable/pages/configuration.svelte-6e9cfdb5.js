import{S as Ce,i as Te,s as Ae,x as U,y as V,z,f as S,t as x,C as F,o as Se,a as N,e as fe,c as O,b as E,h as i,l as h,r as I,m as $,n as _,u as J,p as u,I as p,F as Z,a3 as ue,a4 as de,J as we,a5 as pe,g as ve,d as ye,V as ee,W as te,q as Q}from"../chunks/index-37477684.js";import{A as xe,a as ge}from"../chunks/AccordionItem-8aa5ea32.js";import{s as Ne}from"../chunks/Indicator.svelte_svelte_type_style_lang-a281e7b7.js";import{B as ke}from"../chunks/Button-4b5393cf.js";import{T as Oe}from"../chunks/Toggle-fd5536c1.js";import{M as Le}from"../chunks/Modal-0925c139.js";import{S as Ee}from"../chunks/Spinner-8314c785.js";import{T as Pe}from"../chunks/TabItem-1cd057fb.js";import{T as Be}from"../chunks/Tabs-1b53a38d.js";import{bl as _e,b7 as me,C as he,aO as ne}from"../chunks/configG-9163882e.js";import"../chunks/index-744c10a2.js";import"../chunks/Frame-f9df5eb6.js";import"../chunks/ChevronUp-6311701e.js";import"../chunks/index-dce638ba.js";import"../chunks/Radio-4ee9ba4c.js";import"../chunks/CloseButton-fa414382.js";function De(g){let e;return{c(){e=I("Export")},l(r){e=J(r,"Export")},m(r,t){E(r,e,t)},d(r){r&&i(e)}}}function Ie(g){let e,r,t,o,l,n,c,s,f;return s=new ke({props:{$$slots:{default:[De]},$$scope:{ctx:g}}}),s.$on("click",g[9]),{c(){e=h("table"),r=h("tr"),t=h("td"),o=h("p"),l=I("Backup Current Configuration"),n=N(),c=h("td"),U(s.$$.fragment),this.h()},l(a){e=$(a,"TABLE",{});var d=_(e);r=$(d,"TR",{});var b=_(r);t=$(b,"TD",{class:!0});var y=_(t);o=$(y,"P",{class:!0});var C=_(o);l=J(C,"Backup Current Configuration"),C.forEach(i),y.forEach(i),n=O(b),c=$(b,"TD",{class:!0});var k=_(c);V(s.$$.fragment,k),k.forEach(i),b.forEach(i),d.forEach(i),this.h()},h(){u(o,"class","pl-10 pt-1 text-lg font-light text-right"),u(t,"class","w-85"),u(c,"class","pl-5 pt-1")},m(a,d){E(a,e,d),p(e,r),p(r,t),p(t,o),p(o,l),p(r,n),p(r,c),z(s,c,null),f=!0},p(a,d){const b={};d&16777216&&(b.$$scope={dirty:d,ctx:a}),s.$set(b)},i(a){f||(S(s.$$.fragment,a),f=!0)},o(a){x(s.$$.fragment,a),f=!1},d(a){a&&i(e),F(s)}}}function Je(g){let e,r;return{c(){e=h("span"),r=I("Export Configuration"),this.h()},l(t){e=$(t,"SPAN",{slot:!0,class:!0});var o=_(e);r=J(o,"Export Configuration"),o.forEach(i),this.h()},h(){u(e,"slot","header"),u(e,"class","pl-4")},m(t,o){E(t,e,o),p(e,r)},p:Z,d(t){t&&i(e)}}}function Re(g){let e;return{c(){e=I("Import")},l(r){e=J(r,"Import")},m(r,t){E(r,e,t)},d(r){r&&i(e)}}}function $e(g){let e,r,t,o,l,n,c,s;return{c(){e=h("button"),r=h("span"),t=I("Close modal"),o=N(),l=ee("svg"),n=ee("path"),this.h()},l(f){e=$(f,"BUTTON",{type:!0,class:!0,"aria-label":!0});var a=_(e);r=$(a,"SPAN",{class:!0});var d=_(r);t=J(d,"Close modal"),d.forEach(i),o=O(a),l=te(a,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var b=_(l);n=te(b,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(n).forEach(i),b.forEach(i),a.forEach(i),this.h()},h(){u(r,"class","sr-only"),u(n,"fill-rule","evenodd"),u(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),u(n,"clip-rule","evenodd"),u(l,"class","w-5 h-5"),u(l,"fill","currentColor"),u(l,"viewBox","0 0 20 20"),u(l,"xmlns","http://www.w3.org/2000/svg"),u(e,"type","button"),u(e,"class","ml-auto focus:outline-none whitespace-normal rounded-lg focus:ring-2 p-1.5 focus:ring-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 absolute top-3 right-2.5"),u(e,"aria-label","Close")},m(f,a){E(f,e,a),p(e,r),p(r,t),p(e,o),p(e,l),p(l,n),c||(s=we(e,"click",g[6]),c=!0)},p:Z,d(f){f&&i(e),c=!1,s()}}}function Ue(g){let e,r,t,o,l,n,c,s,f,a,d,b,y,C,k,P,M;return b=new Ee({props:{size:16}}),{c(){e=h("tr"),r=h("td"),t=ee("svg"),o=ee("path"),l=N(),n=h("td"),c=h("p"),s=I("It's valid configuration."),f=N(),a=h("tr"),d=h("td"),U(b.$$.fragment),y=N(),C=h("td"),k=h("p"),P=I("Applying configuration and restart ...."),this.h()},l(v){e=$(v,"TR",{});var T=_(e);r=$(T,"TD",{});var G=_(r);t=te(G,"svg",{class:!0,"aria-hidden":!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var W=_(t);o=te(W,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),_(o).forEach(i),W.forEach(i),G.forEach(i),l=O(T),n=$(T,"TD",{});var L=_(n);c=$(L,"P",{class:!0,style:!0});var K=_(c);s=J(K,"It's valid configuration."),K.forEach(i),L.forEach(i),T.forEach(i),f=O(v),a=$(v,"TR",{});var R=_(a);d=$(R,"TD",{class:!0});var H=_(d);V(b.$$.fragment,H),H.forEach(i),y=O(R),C=$(R,"TD",{class:!0});var X=_(C);k=$(X,"P",{class:!0,style:!0});var m=_(k);P=J(m,"Applying configuration and restart ...."),m.forEach(i),X.forEach(i),R.forEach(i),this.h()},h(){u(o,"d","M4.5 12.75l6 6 9-13.5"),u(o,"stroke-linecap","round"),u(o,"stroke-linejoin","round"),u(t,"class","w-16 h-16"),u(t,"aria-hidden","true"),u(t,"fill","none"),u(t,"stroke","currentColor"),u(t,"stroke-width","1.5"),u(t,"viewBox","0 0 24 24"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(c,"class","pl-5"),Q(c,"color","red"),Q(c,"font-size","18px"),u(d,"class","pt-5"),u(k,"class","pl-5"),Q(k,"color","red"),Q(k,"font-size","18px"),u(C,"class","pt-5")},m(v,T){E(v,e,T),p(e,r),p(r,t),p(t,o),p(e,l),p(e,n),p(n,c),p(c,s),E(v,f,T),E(v,a,T),p(a,d),z(b,d,null),p(a,y),p(a,C),p(C,k),p(k,P),M=!0},p:Z,i(v){M||(S(b.$$.fragment,v),M=!0)},o(v){x(b.$$.fragment,v),M=!1},d(v){v&&i(e),v&&i(f),v&&i(a),F(b)}}}function Ve(g){let e,r,t,o;const l=[Fe,ze],n=[];function c(s,f){return s[5]==0?0:s[5]==1?1:-1}return~(r=c(g))&&(t=n[r]=l[r](g)),{c(){e=h("tr"),t&&t.c()},l(s){e=$(s,"TR",{});var f=_(e);t&&t.l(f),f.forEach(i)},m(s,f){E(s,e,f),~r&&n[r].m(e,null),o=!0},p(s,f){let a=r;r=c(s),r!==a&&(t&&(ve(),x(n[a],1,1,()=>{n[a]=null}),ye()),~r?(t=n[r],t||(t=n[r]=l[r](s),t.c()),S(t,1),t.m(e,null)):t=null)},i(s){o||(S(t),o=!0)},o(s){x(t),o=!1},d(s){s&&i(e),~r&&n[r].d()}}}function ze(g){let e,r,t,o,l,n,c;return{c(){e=h("td"),r=ee("svg"),t=ee("path"),o=N(),l=h("td"),n=h("p"),c=I("It's invalid configuration, please upload valid configuration."),this.h()},l(s){e=$(s,"TD",{});var f=_(e);r=te(f,"svg",{class:!0,"aria-hidden":!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var a=_(r);t=te(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),_(t).forEach(i),a.forEach(i),f.forEach(i),o=O(s),l=$(s,"TD",{});var d=_(l);n=$(d,"P",{class:!0,style:!0});var b=_(n);c=J(b,"It's invalid configuration, please upload valid configuration."),b.forEach(i),d.forEach(i),this.h()},h(){u(t,"d","M6 18L18 6M6 6l12 12"),u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(r,"class","w-16 h-16"),u(r,"aria-hidden","true"),u(r,"fill","none"),u(r,"stroke","currentColor"),u(r,"stroke-width","1.5"),u(r,"viewBox","0 0 24 24"),u(r,"xmlns","http://www.w3.org/2000/svg"),u(n,"class","pl-5"),Q(n,"color","red"),Q(n,"font-size","18px")},m(s,f){E(s,e,f),p(e,r),p(r,t),E(s,o,f),E(s,l,f),p(l,n),p(n,c)},i:Z,o:Z,d(s){s&&i(e),s&&i(o),s&&i(l)}}}function Fe(g){let e,r,t,o,l,n,c;return r=new Ee({props:{size:16}}),{c(){e=h("td"),U(r.$$.fragment),t=N(),o=h("td"),l=h("p"),n=I("Verifying configuration now ...."),this.h()},l(s){e=$(s,"TD",{});var f=_(e);V(r.$$.fragment,f),f.forEach(i),t=O(s),o=$(s,"TD",{});var a=_(o);l=$(a,"P",{class:!0,style:!0});var d=_(l);n=J(d,"Verifying configuration now ...."),d.forEach(i),a.forEach(i),this.h()},h(){u(l,"class","pl-5"),Q(l,"color","red"),Q(l,"font-size","18px")},m(s,f){E(s,e,f),z(r,e,null),E(s,t,f),E(s,o,f),p(o,l),p(l,n),c=!0},i(s){c||(S(r.$$.fragment,s),c=!0)},o(s){x(r.$$.fragment,s),c=!1},d(s){s&&i(e),F(r),s&&i(t),s&&i(o)}}}function Me(g){let e,r,t,o,l,n=g[5]==1&&$e(g);const c=[Ve,Ue],s=[];function f(a,d){return a[4]==0?0:a[4]==1?1:-1}return~(t=f(g))&&(o=s[t]=c[t](g)),{c(){n&&n.c(),e=N(),r=h("table"),o&&o.c()},l(a){n&&n.l(a),e=O(a),r=$(a,"TABLE",{});var d=_(r);o&&o.l(d),d.forEach(i)},m(a,d){n&&n.m(a,d),E(a,e,d),E(a,r,d),~t&&s[t].m(r,null),l=!0},p(a,d){a[5]==1?n?n.p(a,d):(n=$e(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null);let b=t;t=f(a),t===b?~t&&s[t].p(a,d):(o&&(ve(),x(s[b],1,1,()=>{s[b]=null}),ye()),~t?(o=s[t],o?o.p(a,d):(o=s[t]=c[t](a),o.c()),S(o,1),o.m(r,null)):o=null)},i(a){l||(S(o),l=!0)},o(a){x(o),l=!1},d(a){n&&n.d(a),a&&i(e),a&&i(r),~t&&s[t].d()}}}function je(g){let e,r,t,o,l,n,c,s,f,a,d,b,y,C,k,P,M,v,T,G,W,L,K,R,H,X;d=new ke({props:{$$slots:{default:[Re]},$$scope:{ctx:g}}}),d.$on("click",g[8]);function m(w){g[11](w)}let B={};g[0]!==void 0&&(B.checked=g[0]),T=new Oe({props:B}),ue.push(()=>de(T,"checked",m,g[0]));function j(w){g[12](w)}let D={size:"md",class:"w-full",permanent:!0,$$slots:{default:[Me]},$$scope:{ctx:g}};return g[3]!==void 0&&(D.open=g[3]),L=new Le({props:D}),ue.push(()=>de(L,"open",j,g[3])),{c(){e=h("table"),r=h("tr"),t=h("td"),o=h("p"),l=I("Configuration File"),n=N(),c=h("td"),s=h("input"),f=N(),a=h("td"),U(d.$$.fragment),b=N(),y=h("tr"),C=h("td"),k=h("p"),P=I("Overwrite LAN Configuration"),M=N(),v=h("td"),U(T.$$.fragment),W=N(),U(L.$$.fragment),this.h()},l(w){e=$(w,"TABLE",{});var A=_(e);r=$(A,"TR",{});var q=_(r);t=$(q,"TD",{class:!0});var re=_(t);o=$(re,"P",{class:!0});var Y=_(o);l=J(Y,"Configuration File"),Y.forEach(i),re.forEach(i),n=O(q),c=$(q,"TD",{class:!0});var se=_(c);s=$(se,"INPUT",{type:!0,id:!0,class:!0}),se.forEach(i),f=O(q),a=$(q,"TD",{class:!0});var le=_(a);V(d.$$.fragment,le),le.forEach(i),q.forEach(i),b=O(A),y=$(A,"TR",{});var oe=_(y);C=$(oe,"TD",{class:!0});var ae=_(C);k=$(ae,"P",{class:!0});var ie=_(k);P=J(ie,"Overwrite LAN Configuration"),ie.forEach(i),ae.forEach(i),M=O(oe),v=$(oe,"TD",{class:!0});var ce=_(v);V(T.$$.fragment,ce),ce.forEach(i),oe.forEach(i),A.forEach(i),W=O(w),V(L.$$.fragment,w),this.h()},h(){u(o,"class","pl-10 pt-5 text-lg font-light text-right"),u(t,"class","w-85"),u(s,"type","file"),u(s,"id","configUpload"),u(s,"class","block w-full disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 p-2.5 text-sm rounded-lg border !p-0 dark:text-gray-400"),u(c,"class","pl-5 pt-5"),u(a,"class","pl-5 pt-5"),u(k,"class","pl-10 pt-5 text-lg font-light text-right"),u(C,"class","w-85"),u(v,"class","pl-5 pt-5")},m(w,A){E(w,e,A),p(e,r),p(r,t),p(t,o),p(o,l),p(r,n),p(r,c),p(c,s),p(r,f),p(r,a),z(d,a,null),p(e,b),p(e,y),p(y,C),p(C,k),p(k,P),p(y,M),p(y,v),z(T,v,null),E(w,W,A),z(L,w,A),R=!0,H||(X=we(s,"change",g[7]),H=!0)},p(w,A){const q={};A&16777216&&(q.$$scope={dirty:A,ctx:w}),d.$set(q);const re={};!G&&A&1&&(G=!0,re.checked=w[0],pe(()=>G=!1)),T.$set(re);const Y={};A&16777264&&(Y.$$scope={dirty:A,ctx:w}),!K&&A&8&&(K=!0,Y.open=w[3],pe(()=>K=!1)),L.$set(Y)},i(w){R||(S(d.$$.fragment,w),S(T.$$.fragment,w),S(L.$$.fragment,w),R=!0)},o(w){x(d.$$.fragment,w),x(T.$$.fragment,w),x(L.$$.fragment,w),R=!1},d(w){w&&i(e),F(d),F(T),w&&i(W),F(L,w),H=!1,X()}}}function We(g){let e,r;return{c(){e=h("span"),r=I("Import Configuration"),this.h()},l(t){e=$(t,"SPAN",{slot:!0,class:!0});var o=_(e);r=J(o,"Import Configuration"),o.forEach(i),this.h()},h(){u(e,"slot","header"),u(e,"class","pl-4")},m(t,o){E(t,e,o),p(e,r)},p:Z,d(t){t&&i(e)}}}function qe(g){let e,r,t,o;return e=new ge({props:{defaultClass:be,$$slots:{header:[Je],default:[Ie]},$$scope:{ctx:g}}}),t=new ge({props:{defaultClass:be,$$slots:{header:[We],default:[je]},$$scope:{ctx:g}}}),{c(){U(e.$$.fragment),r=N(),U(t.$$.fragment)},l(l){V(e.$$.fragment,l),r=O(l),V(t.$$.fragment,l)},m(l,n){z(e,l,n),E(l,r,n),z(t,l,n),o=!0},p(l,n){const c={};n&16777216&&(c.$$scope={dirty:n,ctx:l}),e.$set(c);const s={};n&16777273&&(s.$$scope={dirty:n,ctx:l}),t.$set(s)},i(l){o||(S(e.$$.fragment,l),S(t.$$.fragment,l),o=!0)},o(l){x(e.$$.fragment,l),x(t.$$.fragment,l),o=!1},d(l){F(e,l),l&&i(r),F(t,l)}}}function Ge(g){let e,r;return e=new xe({props:{$$slots:{default:[qe]},$$scope:{ctx:g}}}),{c(){U(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){z(e,t,o),r=!0},p(t,o){const l={};o&16777273&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){x(e.$$.fragment,t),r=!1},d(t){F(e,t)}}}function Ke(g){let e,r,t,o;e=new Pe({props:{open:!0,title:"Local",$$slots:{default:[Ge]},$$scope:{ctx:g}}});let l=0;return{c(){U(e.$$.fragment),r=N(),t=fe()},l(n){V(e.$$.fragment,n),r=O(n),t=fe()},m(n,c){z(e,n,c),E(n,r,c),E(n,t,c),o=!0},p(n,c){const s={};c&16777273&&(s.$$scope={dirty:c,ctx:n}),e.$set(s)},i(n){o||(S(e.$$.fragment,n),S(l),o=!0)},o(n){x(e.$$.fragment,n),x(l),o=!1},d(n){F(e,n),n&&i(r),n&&i(t)}}}function He(g){let e,r;return e=new Be({props:{style:"underline",$$slots:{default:[Ke]},$$scope:{ctx:g}}}),{c(){U(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){z(e,t,o),r=!0},p(t,[o]){const l={};o&16777279&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){x(e.$$.fragment,t),r=!1},d(t){F(e,t)}}}let be="flex items-center justify-start w-full font-medium text-left group-first:rounded-t-xl";function Qe(g,e,r){let t=null,o,l,n,c=!1,s="",f="",a={},d={},b=0,y=[],C=!1,k=0,P=0;Ne.subscribe(m=>{o=m}),_e.subscribe(m=>{s=m}),me.subscribe(m=>{f=m}),he.subscribe(m=>{y=m}),ne.subscribe(m=>{d=m});function M(){r(3,C=!1),r(4,k=0),r(5,P=0)}async function v(m){const B=m.target.files[0];if(B){if(t=B,o){const w=o.match(/.{1,2}/g).map(A=>parseInt(A,16));n=new Uint8Array(w)}const j=new FileReader;j.onload=D=>{const w=new Uint8Array(D.target.result);l=new Uint8Array(w.length+n.length),l.set(n,0),l.set(w,n.length)},j.readAsArrayBuffer(B)}}async function T(){t?(r(3,C=!0),l.length-n.length<120?r(5,P=1):c?(console.log("overwriteLAN: ",c),(await fetch(window.location.origin+"/uploadConfig",{method:"POST",body:l,headers:{"Content-Type":"application/octet-stream"}})).status==200?(r(4,k=1),console.log("200 OK (overwrite lan)")):(console.log("invalid config"),r(5,P=1))):(console.log("overwriteLAN: ",c),(await fetch(window.location.origin+"/uploadCONfigNonLAN",{method:"POST",body:l,headers:{"Content-Type":"application/octet-stream"}})).status==200?(r(4,k=1),console.log("200 OK (non overwrite lan")):r(5,P=1))):console.log("non selected file")}async function G(){try{const m=await fetch(window.location.origin+"/downloadConfig",{method:"POST",body:n});if(m.status==200){const B=await m.blob(),j="EW50V.config",D=document.createElement("a");D.href=URL.createObjectURL(B),D.download=j,D.style.display="none",document.body.appendChild(D),D.click(),document.body.removeChild(D)}}catch(m){console.error("Error exporting file:",m)}}async function W(){const m=await fetch(window.location.origin+"/GetConfigWhOLEveRsion",{method:"POST",body:n});if(m.status==200){const B=await m.arrayBuffer(),j=new Uint8Array(B);s=parseInt(j,16),_e.set(s),console.log("whole_config_version:",s)}}async function L(){const m=await fetch(window.location.origin+"/getconFiguraTionData",{method:"POST",body:n});m.status==200&&(f=await m.json(),console.log(f),me.set(f),r(1,a=JSON.parse(JSON.stringify(f))),d=JSON.parse(JSON.stringify(f)),ne.set(d),r(2,b=1))}function K(){if(console.log(`Save p2e\r
`),y.length!=0&&(y=[]),a.config.system_configuration.p2eService!=f.config.system_configuration.p2eService){let m="P2E service is changed to "+a.config.system_configuration.p2eService;y=[...y,m]}he.set(y),d=JSON.parse(JSON.stringify(a)),ne.set(d),console.log(y)}Se(()=>{console.log("configuration sessionid: "),console.log(o);const B=o.match(/.{1,2}/g).map(j=>parseInt(j,16));n=new Uint8Array(B),o&&f==""?L():o&&f!=""&&(y.length==0?r(1,a=JSON.parse(JSON.stringify(f))):r(1,a=JSON.parse(JSON.stringify(d))),r(2,b=1)),s==""&&W()});function R(m){c=m,r(0,c)}function H(m){C=m,r(3,C)}function X(m){g.$$.not_equal(a.config.system_configuration.p2eService,m)&&(a.config.system_configuration.p2eService=m,r(1,a))}return[c,a,b,C,k,P,M,v,T,G,K,R,H,X]}class pt extends Ce{constructor(e){super(),Te(this,e,Qe,He,Ae,{})}}export{pt as default};
