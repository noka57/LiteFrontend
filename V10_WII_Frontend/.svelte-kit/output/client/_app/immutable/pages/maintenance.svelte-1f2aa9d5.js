import{S as Ne,i as Ve,s as ze,a3 as Be,a4 as Fe,l as _,r as j,a as C,x as te,m as g,n as p,u as q,h as o,c as M,y as re,p as i,b as S,I as c,z as le,J as Pe,f as I,t as z,d as he,a5 as Ue,C as se,o as Le,q as W,V as X,W as Y,F as ae,g as _e}from"../chunks/index-c88a484d.js";import"../chunks/Indicator.svelte_svelte_type_style_lang-75445948.js";import{B as De}from"../chunks/Button-b8c9a7c2.js";import{T as Je}from"../chunks/Toggle-74bd80fb.js";import{M as Re}from"../chunks/Modal-f7c3522f.js";import{S as xe}from"../chunks/Spinner-d2bc27c4.js";import{s as We}from"../chunks/sessionG-532376c1.js";import{I as Se,M as Ae,x as me}from"../chunks/configG-64be2a81.js";import"../chunks/Radio-9a96d140.js";import"../chunks/Frame-e5a79157.js";import"../chunks/index-172727e1.js";function je(h){let t;return{c(){t=j("Update")},l(e){t=q(e,"Update")},m(e,r){S(e,t,r)},d(e){e&&o(t)}}}function Ce(h){let t,e;return{c(){t=_("p"),e=j("It's not valid firmware. Please choose valid one for update"),this.h()},l(r){t=g(r,"P",{style:!0});var l=p(t);e=q(l,"It's not valid firmware. Please choose valid one for update"),l.forEach(o),this.h()},h(){W(t,"color","red"),W(t,"font-size","18px")},m(r,l){S(r,t,l),c(t,e)},d(r){r&&o(t)}}}function Me(h){let t,e,r;function l(s){h[11](s)}let f={};return h[0].config.system_maintenance.fotaEn!==void 0&&(f.checked=h[0].config.system_maintenance.fotaEn),t=new Je({props:f}),Be.push(()=>Fe(t,"checked",l,h[0].config.system_maintenance.fotaEn)),t.$on("change",h[10]),{c(){te(t.$$.fragment)},l(s){re(t.$$.fragment,s)},m(s,u){le(t,s,u),r=!0},p(s,u){const n={};!e&&u&1&&(e=!0,n.checked=s[0].config.system_maintenance.fotaEn,Ue(()=>e=!1)),t.$set(n)},i(s){r||(I(t.$$.fragment,s),r=!0)},o(s){z(t.$$.fragment,s),r=!1},d(s){se(t,s)}}}function qe(h){let t,e,r;return{c(){t=X("svg"),e=X("path"),r=j("Save"),this.h()},l(l){t=Y(l,"svg",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var f=p(t);e=Y(f,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),p(e).forEach(o),f.forEach(o),r=q(l,"Save"),this.h()},h(){i(e,"d","M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round"),i(t,"class","mr-2 w-6 h-6"),i(t,"fill","none"),i(t,"stroke","currentColor"),i(t,"stroke-width","2"),i(t,"viewBox","0 0 24 24"),i(t,"xmlns","http://www.w3.org/2000/svg")},m(l,f){S(l,t,f),c(t,e),S(l,r,f)},p:ae,d(l){l&&o(t),l&&o(r)}}}function Oe(h){let t,e,r,l,f,s,u,n;return{c(){t=_("button"),e=_("span"),r=j("Close modal"),l=C(),f=X("svg"),s=X("path"),this.h()},l(d){t=g(d,"BUTTON",{type:!0,class:!0,"aria-label":!0});var a=p(t);e=g(a,"SPAN",{class:!0});var m=p(e);r=q(m,"Close modal"),m.forEach(o),l=M(a),f=Y(a,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var k=p(f);s=Y(k,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(s).forEach(o),k.forEach(o),a.forEach(o),this.h()},h(){i(e,"class","sr-only"),i(s,"fill-rule","evenodd"),i(s,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),i(s,"clip-rule","evenodd"),i(f,"class","w-5 h-5"),i(f,"fill","currentColor"),i(f,"viewBox","0 0 20 20"),i(f,"xmlns","http://www.w3.org/2000/svg"),i(t,"type","button"),i(t,"class","ml-auto focus:outline-none whitespace-normal rounded-lg focus:ring-2 p-1.5 focus:ring-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 absolute top-3 right-2.5"),i(t,"aria-label","Close")},m(d,a){S(d,t,a),c(t,e),c(e,r),c(t,l),c(t,f),c(f,s),u||(n=Pe(t,"click",h[6]),u=!0)},p:ae,d(d){d&&o(t),u=!1,n()}}}function He(h){let t,e,r,l,f,s,u,n,d,a,m,k,O,A,v,N,x;return k=new xe({props:{size:16}}),{c(){t=_("tr"),e=_("td"),r=X("svg"),l=X("path"),f=C(),s=_("td"),u=_("p"),n=j("It's valid firmware."),d=C(),a=_("tr"),m=_("td"),te(k.$$.fragment),O=C(),A=_("td"),v=_("p"),N=j("Updating firmware and restart ...."),this.h()},l(E){t=g(E,"TR",{});var F=p(t);e=g(F,"TD",{});var V=p(e);r=Y(V,"svg",{class:!0,"aria-hidden":!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var G=p(r);l=Y(G,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),p(l).forEach(o),G.forEach(o),V.forEach(o),f=M(F),s=g(F,"TD",{});var D=p(s);u=g(D,"P",{class:!0,style:!0});var H=p(u);n=q(H,"It's valid firmware."),H.forEach(o),D.forEach(o),F.forEach(o),d=M(E),a=g(E,"TR",{});var J=p(a);m=g(J,"TD",{class:!0});var w=p(m);re(k.$$.fragment,w),w.forEach(o),O=M(J),A=g(J,"TD",{class:!0});var B=p(A);v=g(B,"P",{class:!0,style:!0});var y=p(v);N=q(y,"Updating firmware and restart ...."),y.forEach(o),B.forEach(o),J.forEach(o),this.h()},h(){i(l,"d","M4.5 12.75l6 6 9-13.5"),i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(r,"class","w-16 h-16"),i(r,"aria-hidden","true"),i(r,"fill","none"),i(r,"stroke","currentColor"),i(r,"stroke-width","1.5"),i(r,"viewBox","0 0 24 24"),i(r,"xmlns","http://www.w3.org/2000/svg"),i(u,"class","pl-5"),W(u,"color","red"),W(u,"font-size","18px"),i(m,"class","pt-5"),i(v,"class","pl-5"),W(v,"color","red"),W(v,"font-size","18px"),i(A,"class","pt-5")},m(E,F){S(E,t,F),c(t,e),c(e,r),c(r,l),c(t,f),c(t,s),c(s,u),c(u,n),S(E,d,F),S(E,a,F),c(a,m),le(k,m,null),c(a,O),c(a,A),c(A,v),c(v,N),x=!0},p:ae,i(E){x||(I(k.$$.fragment,E),x=!0)},o(E){z(k.$$.fragment,E),x=!1},d(E){E&&o(t),E&&o(d),E&&o(a),se(k)}}}function Ke(h){let t,e,r,l;const f=[Qe,Ge],s=[];function u(n,d){return n[5]==0?0:n[5]==1?1:-1}return~(e=u(h))&&(r=s[e]=f[e](h)),{c(){t=_("tr"),r&&r.c()},l(n){t=g(n,"TR",{});var d=p(t);r&&r.l(d),d.forEach(o)},m(n,d){S(n,t,d),~e&&s[e].m(t,null),l=!0},p(n,d){let a=e;e=u(n),e!==a&&(r&&(_e(),z(s[a],1,1,()=>{s[a]=null}),he()),~e?(r=s[e],r||(r=s[e]=f[e](n),r.c()),I(r,1),r.m(t,null)):r=null)},i(n){l||(I(r),l=!0)},o(n){z(r),l=!1},d(n){n&&o(t),~e&&s[e].d()}}}function Ge(h){let t,e,r,l,f,s,u;return{c(){t=_("td"),e=X("svg"),r=X("path"),l=C(),f=_("td"),s=_("p"),u=j("It's invalid firmware, please update valid firmware."),this.h()},l(n){t=g(n,"TD",{});var d=p(t);e=Y(d,"svg",{class:!0,"aria-hidden":!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var a=p(e);r=Y(a,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),p(r).forEach(o),a.forEach(o),d.forEach(o),l=M(n),f=g(n,"TD",{});var m=p(f);s=g(m,"P",{class:!0,style:!0});var k=p(s);u=q(k,"It's invalid firmware, please update valid firmware."),k.forEach(o),m.forEach(o),this.h()},h(){i(r,"d","M6 18L18 6M6 6l12 12"),i(r,"stroke-linecap","round"),i(r,"stroke-linejoin","round"),i(e,"class","w-16 h-16"),i(e,"aria-hidden","true"),i(e,"fill","none"),i(e,"stroke","currentColor"),i(e,"stroke-width","1.5"),i(e,"viewBox","0 0 24 24"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(s,"class","pl-5"),W(s,"color","red"),W(s,"font-size","18px")},m(n,d){S(n,t,d),c(t,e),c(e,r),S(n,l,d),S(n,f,d),c(f,s),c(s,u)},i:ae,o:ae,d(n){n&&o(t),n&&o(l),n&&o(f)}}}function Qe(h){let t,e,r,l,f,s,u;return e=new xe({props:{size:16}}),{c(){t=_("td"),te(e.$$.fragment),r=C(),l=_("td"),f=_("p"),s=j("Verifying firmware now ...."),this.h()},l(n){t=g(n,"TD",{});var d=p(t);re(e.$$.fragment,d),d.forEach(o),r=M(n),l=g(n,"TD",{});var a=p(l);f=g(a,"P",{class:!0,style:!0});var m=p(f);s=q(m,"Verifying firmware now ...."),m.forEach(o),a.forEach(o),this.h()},h(){i(f,"class","pl-5"),W(f,"color","red"),W(f,"font-size","18px")},m(n,d){S(n,t,d),le(e,t,null),S(n,r,d),S(n,l,d),c(l,f),c(f,s),u=!0},i(n){u||(I(e.$$.fragment,n),u=!0)},o(n){z(e.$$.fragment,n),u=!1},d(n){n&&o(t),se(e),n&&o(r),n&&o(l)}}}function Xe(h){let t,e,r,l,f,s=h[5]==1&&Oe(h);const u=[Ke,He],n=[];function d(a,m){return a[4]==0?0:a[4]==1?1:-1}return~(r=d(h))&&(l=n[r]=u[r](h)),{c(){s&&s.c(),t=C(),e=_("table"),l&&l.c()},l(a){s&&s.l(a),t=M(a),e=g(a,"TABLE",{});var m=p(e);l&&l.l(m),m.forEach(o)},m(a,m){s&&s.m(a,m),S(a,t,m),S(a,e,m),~r&&n[r].m(e,null),f=!0},p(a,m){a[5]==1?s?s.p(a,m):(s=Oe(a),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null);let k=r;r=d(a),r===k?~r&&n[r].p(a,m):(l&&(_e(),z(n[k],1,1,()=>{n[k]=null}),he()),~r?(l=n[r],l?l.p(a,m):(l=n[r]=u[r](a),l.c()),I(l,1),l.m(e,null)):l=null)},i(a){f||(I(l),f=!0)},o(a){z(l),f=!1},d(a){s&&s.d(a),a&&o(t),a&&o(e),~r&&n[r].d()}}}function Ye(h){let t,e,r,l,f,s,u,n,d,a,m,k,O,A,v,N,x,E,F,V,G,D,H,J,w,B,y,U,Q,Z,ue,oe,ie,K,de,fe,pe,ge;m=new De({props:{$$slots:{default:[je]},$$scope:{ctx:h}}}),m.$on("click",h[8]);let P=h[2]==0&&Ce(),T=h[1]==1&&Me(h);U=new De({props:{color:"blue",pill:!0,$$slots:{default:[qe]},$$scope:{ctx:h}}}),U.$on("click",h[9]);function Ie(b){h[12](b)}let we={size:"md",class:"w-full",permanent:!0,$$slots:{default:[Xe]},$$scope:{ctx:h}};return h[3]!==void 0&&(we.open=h[3]),K=new Re({props:we}),Be.push(()=>Fe(K,"open",Ie,h[3])),{c(){t=_("table"),e=_("tr"),r=_("td"),l=_("p"),f=j("Update Local Firmware"),s=C(),u=_("td"),n=_("input"),d=C(),a=_("td"),te(m.$$.fragment),k=C(),O=_("td"),P&&P.c(),A=C(),v=_("tr"),N=_("td"),x=_("p"),E=j("Enable EW-FOTA"),F=C(),V=_("td"),T&&T.c(),G=C(),D=_("tr"),H=_("td"),J=C(),w=_("td"),B=C(),y=_("td"),te(U.$$.fragment),Q=C(),Z=_("td"),ue=C(),oe=_("td"),ie=C(),te(K.$$.fragment),this.h()},l(b){t=g(b,"TABLE",{});var $=p(t);e=g($,"TR",{});var L=p(e);r=g(L,"TD",{class:!0});var ne=p(r);l=g(ne,"P",{class:!0});var ee=p(l);f=q(ee,"Update Local Firmware"),ee.forEach(o),ne.forEach(o),s=M(L),u=g(L,"TD",{class:!0});var be=p(u);n=g(be,"INPUT",{type:!0,id:!0,class:!0}),be.forEach(o),d=M(L),a=g(L,"TD",{class:!0});var ve=p(a);re(m.$$.fragment,ve),ve.forEach(o),k=M(L),O=g(L,"TD",{class:!0,colspan:!0});var ke=p(O);P&&P.l(ke),ke.forEach(o),L.forEach(o),A=M($),v=g($,"TR",{});var ce=p(v);N=g(ce,"TD",{class:!0});var ye=p(N);x=g(ye,"P",{class:!0});var Ee=p(x);E=q(Ee,"Enable EW-FOTA"),Ee.forEach(o),ye.forEach(o),F=M(ce),V=g(ce,"TD",{class:!0});var Te=p(V);T&&T.l(Te),Te.forEach(o),ce.forEach(o),G=M($),D=g($,"TR",{class:!0});var R=p(D);H=g(R,"TD",{}),p(H).forEach(o),J=M(R),w=g(R,"TD",{}),p(w).forEach(o),B=M(R),y=g(R,"TD",{});var $e=p(y);re(U.$$.fragment,$e),$e.forEach(o),Q=M(R),Z=g(R,"TD",{}),p(Z).forEach(o),ue=M(R),oe=g(R,"TD",{}),p(oe).forEach(o),R.forEach(o),$.forEach(o),ie=M(b),re(K.$$.fragment,b),this.h()},h(){i(l,"class","pl-10 pt-5 text-lg font-light text-right"),i(r,"class","w-85"),i(n,"type","file"),i(n,"id","FwrUpload"),i(n,"class","block w-full disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 p-2.5 text-sm rounded-lg border !p-0 dark:text-gray-400"),i(u,"class","pl-5 pt-5"),i(a,"class","pl-5 pt-5"),i(O,"class","pl-5 pt-5"),i(O,"colspan","2"),i(x,"class","pl-10 pt-5 text-lg font-light text-right"),i(N,"class","w-85"),i(V,"class","pl-5 pt-5"),i(D,"class","pt-5")},m(b,$){S(b,t,$),c(t,e),c(e,r),c(r,l),c(l,f),c(e,s),c(e,u),c(u,n),c(e,d),c(e,a),le(m,a,null),c(e,k),c(e,O),P&&P.m(O,null),c(t,A),c(t,v),c(v,N),c(N,x),c(x,E),c(v,F),c(v,V),T&&T.m(V,null),c(t,G),c(t,D),c(D,H),c(D,J),c(D,w),c(D,B),c(D,y),le(U,y,null),c(D,Q),c(D,Z),c(D,ue),c(D,oe),S(b,ie,$),le(K,b,$),fe=!0,pe||(ge=Pe(n,"change",h[7]),pe=!0)},p(b,[$]){const L={};$&4194304&&(L.$$scope={dirty:$,ctx:b}),m.$set(L),b[2]==0?P||(P=Ce(),P.c(),P.m(O,null)):P&&(P.d(1),P=null),b[1]==1?T?(T.p(b,$),$&2&&I(T,1)):(T=Me(b),T.c(),I(T,1),T.m(V,null)):T&&(_e(),z(T,1,1,()=>{T=null}),he());const ne={};$&4194304&&(ne.$$scope={dirty:$,ctx:b}),U.$set(ne);const ee={};$&4194352&&(ee.$$scope={dirty:$,ctx:b}),!de&&$&8&&(de=!0,ee.open=b[3],Ue(()=>de=!1)),K.$set(ee)},i(b){fe||(I(m.$$.fragment,b),I(T),I(U.$$.fragment,b),I(K.$$.fragment,b),fe=!0)},o(b){z(m.$$.fragment,b),z(T),z(U.$$.fragment,b),z(K.$$.fragment,b),fe=!1},d(b){b&&o(t),se(m),P&&P.d(),T&&T.d(),se(U),b&&o(ie),se(K,b),pe=!1,ge()}}}function Ze(h,t,e){let r="",l={},f={},s=0,u=[],n=null,d,a=1,m=!1,k=0,O=0,A,v;We.subscribe(w=>{A=w});function N(){e(3,m=!1),e(4,k=0),e(5,O=0)}Se.subscribe(w=>{r=w}),Ae.subscribe(w=>{u=w}),me.subscribe(w=>{f=w});async function x(w){const B=w.target.files[0];if(B){if(a==0&&e(2,a=1),n=B,A){const Q=A.match(/.{1,2}/g).map(Z=>parseInt(Z,16));v=new Uint8Array(Q)}const y=new FileReader;y.onload=U=>{const Q=new Uint8Array(U.target.result);d=new Uint8Array(Q.length+v.length),d.set(v,0),d.set(Q,v.length)},y.readAsArrayBuffer(B)}}async function E(){n&&(e(2,a=0),d[v.length]==65&&d[v.length+1]==80&&d[v.length+2]==118&&d[v.length+3]==50?(console.log("is APv2!"),e(2,a=1)):(console.log("is not APv2"),e(2,a=0)),a==1&&(e(3,m=!0),(await fetch(window.location.origin+"/updateFwr",{method:"POST",body:d,headers:{"Content-Type":"application/octet-stream"}})).status==200?(e(4,k=1),console.log("Update Fwr 200 OK")):(e(2,a=0),e(5,O=1))))}function F(w,B){for(const y in w)if(typeof w[y]=="object"&&typeof B[y]=="object")F(w[y],B[y]);else if(w[y]!=B[y]){let U="Value of "+y+" has changed to "+w[y];u=[...u,U]}}function V(){console.log(`Save Maintenance Setting\r
`),u.length!=0&&(u=[]),F(l,r),Ae.set(u),me.set(l),console.log(u)}function G(){console.log("EW_FOTA_CHACK()"),console.log(l.config.system_maintenance.fotaEn),l.config.system_maintenance.fotaEn?e(0,l.config.system_maintenance.fotaEn=1,l):e(0,l.config.system_maintenance.fotaEn=0,l)}async function D(){const w=await fetch(window.location.origin+"/getMaintenanceData",{method:"POST",body:v});w.status==200&&(r=await w.json(),console.log(r),Se.set(r),e(0,l=JSON.parse(JSON.stringify(r))),f=JSON.parse(JSON.stringify(r)),me.set(f),e(1,s=1))}Le(()=>{if(console.log("maintenance sessionid: "),console.log(A),A&&r==""){const B=A.match(/.{1,2}/g).map(y=>parseInt(y,16));v=new Uint8Array(B),D()}else A&&r!=""&&(u.length==0?e(0,l=JSON.parse(JSON.stringify(r))):e(0,l=JSON.parse(JSON.stringify(f))),e(1,s=1))});function H(w){h.$$.not_equal(l.config.system_maintenance.fotaEn,w)&&(l.config.system_maintenance.fotaEn=w,e(0,l))}function J(w){m=w,e(3,m)}return[l,s,a,m,k,O,N,x,E,V,G,H,J]}class ut extends Ne{constructor(t){super(),Ve(this,t,Ze,Ye,ze,{})}}export{ut as default};
