import{S as ve,i as we,s as ke,x as F,y as q,z as K,f as L,t as I,C as W,o as ye,a as O,c as x,b as S,h as a,a3 as _e,a4 as he,l as m,r as z,m as $,n as _,u as V,p as f,I as c,J as me,a5 as $e,g as oe,d as le,V as H,W as Q,F as ee,q as G}from"../chunks/index-267512dc.js";import"../chunks/Indicator.svelte_svelte_type_style_lang-75445948.js";import{B as re}from"../chunks/Button-52fc61f8.js";import{T as Ee}from"../chunks/Toggle-298f25e2.js";import{M as Te}from"../chunks/Modal-fdf4aeed.js";import{S as be}from"../chunks/Spinner-a852dc4d.js";import{T as ce}from"../chunks/TabItem-b3a6c2a8.js";import{T as Ce}from"../chunks/Tabs-b71cabd5.js";import{s as Se}from"../chunks/sessionG-e8b8f90d.js";import{b3 as ue,C as de,aK as te}from"../chunks/configG-e6a34c7e.js";import"../chunks/Radio-726785d0.js";import"../chunks/Frame-c8cc164f.js";import"../chunks/CloseButton-d653a919.js";import"../chunks/index-b2b51752.js";function De(h){let e;return{c(){e=z("Download")},l(t){e=V(t,"Download")},m(t,r){S(t,e,r)},d(t){t&&a(e)}}}function Be(h){let e;return{c(){e=z("Upload")},l(t){e=V(t,"Upload")},m(t,r){S(t,e,r)},d(t){t&&a(e)}}}function pe(h){let e,t,r,s,n,l,u,o;return{c(){e=m("button"),t=m("span"),r=z("Close modal"),s=O(),n=H("svg"),l=H("path"),this.h()},l(d){e=$(d,"BUTTON",{type:!0,class:!0,"aria-label":!0});var i=_(e);t=$(i,"SPAN",{class:!0});var g=_(t);r=V(g,"Close modal"),g.forEach(a),s=x(i),n=Q(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var b=_(n);l=Q(b,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(l).forEach(a),b.forEach(a),i.forEach(a),this.h()},h(){f(t,"class","sr-only"),f(l,"fill-rule","evenodd"),f(l,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),f(l,"clip-rule","evenodd"),f(n,"class","w-5 h-5"),f(n,"fill","currentColor"),f(n,"viewBox","0 0 20 20"),f(n,"xmlns","http://www.w3.org/2000/svg"),f(e,"type","button"),f(e,"class","ml-auto focus:outline-none whitespace-normal rounded-lg focus:ring-2 p-1.5 focus:ring-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 absolute top-3 right-2.5"),f(e,"aria-label","Close")},m(d,i){S(d,e,i),c(e,t),c(t,r),c(e,s),c(e,n),c(n,l),u||(o=me(e,"click",h[5]),u=!0)},p:ee,d(d){d&&a(e),u=!1,o()}}}function Pe(h){let e,t,r,s,n,l,u,o,d,i,g,b,U,D,C,N,J;return b=new be({props:{size:16}}),{c(){e=m("tr"),t=m("td"),r=H("svg"),s=H("path"),n=O(),l=m("td"),u=m("p"),o=z("It's valid configuration."),d=O(),i=m("tr"),g=m("td"),F(b.$$.fragment),U=O(),D=m("td"),C=m("p"),N=z("Applying configuration and restart ...."),this.h()},l(y){e=$(y,"TR",{});var T=_(e);t=$(T,"TD",{});var B=_(t);r=Q(B,"svg",{class:!0,"aria-hidden":!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var P=_(r);s=Q(P,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),_(s).forEach(a),P.forEach(a),B.forEach(a),n=x(T),l=$(T,"TD",{});var w=_(l);u=$(w,"P",{class:!0,style:!0});var p=_(u);o=V(p,"It's valid configuration."),p.forEach(a),w.forEach(a),T.forEach(a),d=x(y),i=$(y,"TR",{});var E=_(i);g=$(E,"TD",{class:!0});var A=_(g);q(b.$$.fragment,A),A.forEach(a),U=x(E),D=$(E,"TD",{class:!0});var R=_(D);C=$(R,"P",{class:!0,style:!0});var M=_(C);N=V(M,"Applying configuration and restart ...."),M.forEach(a),R.forEach(a),E.forEach(a),this.h()},h(){f(s,"d","M4.5 12.75l6 6 9-13.5"),f(s,"stroke-linecap","round"),f(s,"stroke-linejoin","round"),f(r,"class","w-16 h-16"),f(r,"aria-hidden","true"),f(r,"fill","none"),f(r,"stroke","currentColor"),f(r,"stroke-width","1.5"),f(r,"viewBox","0 0 24 24"),f(r,"xmlns","http://www.w3.org/2000/svg"),f(u,"class","pl-5"),G(u,"color","red"),G(u,"font-size","18px"),f(g,"class","pt-5"),f(C,"class","pl-5"),G(C,"color","red"),G(C,"font-size","18px"),f(D,"class","pt-5")},m(y,T){S(y,e,T),c(e,t),c(t,r),c(r,s),c(e,n),c(e,l),c(l,u),c(u,o),S(y,d,T),S(y,i,T),c(i,g),K(b,g,null),c(i,U),c(i,D),c(D,C),c(C,N),J=!0},p:ee,i(y){J||(L(b.$$.fragment,y),J=!0)},o(y){I(b.$$.fragment,y),J=!1},d(y){y&&a(e),y&&a(d),y&&a(i),W(b)}}}function Ae(h){let e,t,r,s;const n=[xe,Oe],l=[];function u(o,d){return o[4]==0?0:o[4]==1?1:-1}return~(t=u(h))&&(r=l[t]=n[t](h)),{c(){e=m("tr"),r&&r.c()},l(o){e=$(o,"TR",{});var d=_(e);r&&r.l(d),d.forEach(a)},m(o,d){S(o,e,d),~t&&l[t].m(e,null),s=!0},p(o,d){let i=t;t=u(o),t!==i&&(r&&(oe(),I(l[i],1,1,()=>{l[i]=null}),le()),~t?(r=l[t],r||(r=l[t]=n[t](o),r.c()),L(r,1),r.m(e,null)):r=null)},i(o){s||(L(r),s=!0)},o(o){I(r),s=!1},d(o){o&&a(e),~t&&l[t].d()}}}function Oe(h){let e,t,r,s,n,l,u;return{c(){e=m("td"),t=H("svg"),r=H("path"),s=O(),n=m("td"),l=m("p"),u=z("It's invalid configuration, please upload valid configuration."),this.h()},l(o){e=$(o,"TD",{});var d=_(e);t=Q(d,"svg",{class:!0,"aria-hidden":!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var i=_(t);r=Q(i,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),_(r).forEach(a),i.forEach(a),d.forEach(a),s=x(o),n=$(o,"TD",{});var g=_(n);l=$(g,"P",{class:!0,style:!0});var b=_(l);u=V(b,"It's invalid configuration, please upload valid configuration."),b.forEach(a),g.forEach(a),this.h()},h(){f(r,"d","M6 18L18 6M6 6l12 12"),f(r,"stroke-linecap","round"),f(r,"stroke-linejoin","round"),f(t,"class","w-16 h-16"),f(t,"aria-hidden","true"),f(t,"fill","none"),f(t,"stroke","currentColor"),f(t,"stroke-width","1.5"),f(t,"viewBox","0 0 24 24"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(l,"class","pl-5"),G(l,"color","red"),G(l,"font-size","18px")},m(o,d){S(o,e,d),c(e,t),c(t,r),S(o,s,d),S(o,n,d),c(n,l),c(l,u)},i:ee,o:ee,d(o){o&&a(e),o&&a(s),o&&a(n)}}}function xe(h){let e,t,r,s,n,l,u;return t=new be({props:{size:16}}),{c(){e=m("td"),F(t.$$.fragment),r=O(),s=m("td"),n=m("p"),l=z("Verifying configuration now ...."),this.h()},l(o){e=$(o,"TD",{});var d=_(e);q(t.$$.fragment,d),d.forEach(a),r=x(o),s=$(o,"TD",{});var i=_(s);n=$(i,"P",{class:!0,style:!0});var g=_(n);l=V(g,"Verifying configuration now ...."),g.forEach(a),i.forEach(a),this.h()},h(){f(n,"class","pl-5"),G(n,"color","red"),G(n,"font-size","18px")},m(o,d){S(o,e,d),K(t,e,null),S(o,r,d),S(o,s,d),c(s,n),c(n,l),u=!0},i(o){u||(L(t.$$.fragment,o),u=!0)},o(o){I(t.$$.fragment,o),u=!1},d(o){o&&a(e),W(t),o&&a(r),o&&a(s)}}}function Ne(h){let e,t,r,s,n,l=h[4]==1&&pe(h);const u=[Ae,Pe],o=[];function d(i,g){return i[3]==0?0:i[3]==1?1:-1}return~(r=d(h))&&(s=o[r]=u[r](h)),{c(){l&&l.c(),e=O(),t=m("table"),s&&s.c()},l(i){l&&l.l(i),e=x(i),t=$(i,"TABLE",{});var g=_(t);s&&s.l(g),g.forEach(a)},m(i,g){l&&l.m(i,g),S(i,e,g),S(i,t,g),~r&&o[r].m(t,null),n=!0},p(i,g){i[4]==1?l?l.p(i,g):(l=pe(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);let b=r;r=d(i),r===b?~r&&o[r].p(i,g):(s&&(oe(),I(o[b],1,1,()=>{o[b]=null}),le()),~r?(s=o[r],s?s.p(i,g):(s=o[r]=u[r](i),s.c()),L(s,1),s.m(t,null)):s=null)},i(i){n||(L(s),n=!0)},o(i){I(s),n=!1},d(i){l&&l.d(i),i&&a(e),i&&a(t),~r&&o[r].d()}}}function Re(h){let e,t,r,s,n,l,u,o,d,i,g,b,U,D,C,N,J,y,T,B,P,w,p,E,A;o=new re({props:{$$slots:{default:[De]},$$scope:{ctx:h}}}),o.$on("click",h[8]),T=new re({props:{$$slots:{default:[Be]},$$scope:{ctx:h}}}),T.$on("click",h[7]);function R(v){h[10](v)}let M={size:"md",class:"w-full",permanent:!0,$$slots:{default:[Ne]},$$scope:{ctx:h}};return h[2]!==void 0&&(M.open=h[2]),P=new Te({props:M}),_e.push(()=>he(P,"open",R,h[2])),{c(){e=m("table"),t=m("tr"),r=m("td"),s=m("p"),n=z("Backup Current Configuration"),l=O(),u=m("td"),F(o.$$.fragment),d=O(),i=m("tr"),g=m("td"),b=m("p"),U=z("Restore Configuration"),D=O(),C=m("td"),N=m("input"),J=O(),y=m("td"),F(T.$$.fragment),B=O(),F(P.$$.fragment),this.h()},l(v){e=$(v,"TABLE",{});var k=_(e);t=$(k,"TR",{});var j=_(t);r=$(j,"TD",{class:!0});var Z=_(r);s=$(Z,"P",{class:!0});var X=_(s);n=V(X,"Backup Current Configuration"),X.forEach(a),Z.forEach(a),l=x(j),u=$(j,"TD",{class:!0});var se=_(u);q(o.$$.fragment,se),se.forEach(a),j.forEach(a),d=x(k),i=$(k,"TR",{});var Y=_(i);g=$(Y,"TD",{class:!0});var ne=_(g);b=$(ne,"P",{class:!0});var ae=_(b);U=V(ae,"Restore Configuration"),ae.forEach(a),ne.forEach(a),D=x(Y),C=$(Y,"TD",{class:!0});var ie=_(C);N=$(ie,"INPUT",{type:!0,id:!0,class:!0}),ie.forEach(a),J=x(Y),y=$(Y,"TD",{class:!0});var fe=_(y);q(T.$$.fragment,fe),fe.forEach(a),Y.forEach(a),k.forEach(a),B=x(v),q(P.$$.fragment,v),this.h()},h(){f(s,"class","pl-10 pt-5 text-lg font-light text-right"),f(r,"class","w-85"),f(u,"class","pl-5 pt-5"),f(b,"class","pl-10 pt-5 text-lg font-light text-right"),f(g,"class","w-85"),f(N,"type","file"),f(N,"id","configUpload"),f(N,"class","block w-full disabled:cursor-not-allowed disabled:opacity-50 focus:border-blue-500 focus:ring-blue-500 dark:focus:border-blue-500 dark:focus:ring-blue-500 bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 border-gray-300 dark:border-gray-600 p-2.5 text-sm rounded-lg border !p-0 dark:text-gray-400"),f(C,"class","pl-5 pt-5"),f(y,"class","pl-5 pt-5")},m(v,k){S(v,e,k),c(e,t),c(t,r),c(r,s),c(s,n),c(t,l),c(t,u),K(o,u,null),c(e,d),c(e,i),c(i,g),c(g,b),c(b,U),c(i,D),c(i,C),c(C,N),c(i,J),c(i,y),K(T,y,null),S(v,B,k),K(P,v,k),p=!0,E||(A=me(N,"change",h[6]),E=!0)},p(v,k){const j={};k&1048576&&(j.$$scope={dirty:k,ctx:v}),o.$set(j);const Z={};k&1048576&&(Z.$$scope={dirty:k,ctx:v}),T.$set(Z);const X={};k&1048600&&(X.$$scope={dirty:k,ctx:v}),!w&&k&4&&(w=!0,X.open=v[2],$e(()=>w=!1)),P.$set(X)},i(v){p||(L(o.$$.fragment,v),L(T.$$.fragment,v),L(P.$$.fragment,v),p=!0)},o(v){I(o.$$.fragment,v),I(T.$$.fragment,v),I(P.$$.fragment,v),p=!1},d(v){v&&a(e),W(o),W(T),v&&a(B),W(P,v),E=!1,A()}}}function ge(h){let e,t,r;function s(l){h[11](l)}let n={};return h[0].config.system_configuration.p2eService!==void 0&&(n.checked=h[0].config.system_configuration.p2eService),e=new Ee({props:n}),_e.push(()=>he(e,"checked",s,h[0].config.system_configuration.p2eService)),{c(){F(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,u){K(e,l,u),r=!0},p(l,u){const o={};!t&&u&1&&(t=!0,o.checked=l[0].config.system_configuration.p2eService,$e(()=>t=!1)),e.$set(o)},i(l){r||(L(e.$$.fragment,l),r=!0)},o(l){I(e.$$.fragment,l),r=!1},d(l){W(e,l)}}}function Le(h){let e,t,r;return{c(){e=H("svg"),t=H("path"),r=z("Save"),this.h()},l(s){e=Q(s,"svg",{class:!0,fill:!0,stroke:!0,"stroke-width":!0,viewBox:!0,xmlns:!0});var n=_(e);t=Q(n,"path",{d:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),_(t).forEach(a),n.forEach(a),r=V(s,"Save"),this.h()},h(){f(t,"d","M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"),f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(e,"class","mr-2 -ml-1 w-6 h-6"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","2"),f(e,"viewBox","0 0 24 24"),f(e,"xmlns","http://www.w3.org/2000/svg")},m(s,n){S(s,e,n),c(e,t),S(s,r,n)},p:ee,d(s){s&&a(e),s&&a(r)}}}function Ue(h){let e,t,r,s,n,l,u,o,d,i,g,b,U,D,C,N,J,y,T,B,P,w=h[1]==1&&ge(h);return B=new re({props:{color:"blue",pill:!0,$$slots:{default:[Le]},$$scope:{ctx:h}}}),B.$on("click",h[9]),{c(){e=m("table"),t=m("tr"),r=m("td"),s=m("p"),n=z("P2E Service"),l=m("td"),w&&w.c(),u=O(),o=m("tr"),d=m("td"),i=O(),g=m("td"),b=O(),U=m("td"),D=O(),C=m("td"),N=O(),J=m("td"),y=O(),T=m("td"),F(B.$$.fragment),this.h()},l(p){e=$(p,"TABLE",{});var E=_(e);t=$(E,"TR",{});var A=_(t);r=$(A,"TD",{class:!0});var R=_(r);s=$(R,"P",{class:!0});var M=_(s);n=V(M,"P2E Service"),M.forEach(a),R.forEach(a),l=$(A,"TD",{class:!0});var v=_(l);w&&w.l(v),v.forEach(a),A.forEach(a),u=x(E),o=$(E,"TR",{class:!0});var k=_(o);d=$(k,"TD",{}),_(d).forEach(a),i=x(k),g=$(k,"TD",{}),_(g).forEach(a),b=x(k),U=$(k,"TD",{}),_(U).forEach(a),D=x(k),C=$(k,"TD",{}),_(C).forEach(a),N=x(k),J=$(k,"TD",{}),_(J).forEach(a),y=x(k),T=$(k,"TD",{class:!0});var j=_(T);q(B.$$.fragment,j),j.forEach(a),k.forEach(a),E.forEach(a),this.h()},h(){f(s,"class","pl-10 pt-5 text-lg font-light text-right"),f(r,"class","w-60"),f(l,"class","pl-5 pt-5"),f(T,"class","pl-10"),f(o,"class","pt-5")},m(p,E){S(p,e,E),c(e,t),c(t,r),c(r,s),c(s,n),c(t,l),w&&w.m(l,null),c(e,u),c(e,o),c(o,d),c(o,i),c(o,g),c(o,b),c(o,U),c(o,D),c(o,C),c(o,N),c(o,J),c(o,y),c(o,T),K(B,T,null),P=!0},p(p,E){p[1]==1?w?(w.p(p,E),E&2&&L(w,1)):(w=ge(p),w.c(),L(w,1),w.m(l,null)):w&&(oe(),I(w,1,1,()=>{w=null}),le());const A={};E&1048576&&(A.$$scope={dirty:E,ctx:p}),B.$set(A)},i(p){P||(L(w),L(B.$$.fragment,p),P=!0)},o(p){I(w),I(B.$$.fragment,p),P=!1},d(p){p&&a(e),w&&w.d(),W(B)}}}function Ie(h){let e,t,r,s;return e=new ce({props:{open:!0,title:"Local",$$slots:{default:[Re]},$$scope:{ctx:h}}}),r=new ce({props:{title:"P2E",$$slots:{default:[Ue]},$$scope:{ctx:h}}}),{c(){F(e.$$.fragment),t=O(),F(r.$$.fragment)},l(n){q(e.$$.fragment,n),t=x(n),q(r.$$.fragment,n)},m(n,l){K(e,n,l),S(n,t,l),K(r,n,l),s=!0},p(n,l){const u={};l&1048604&&(u.$$scope={dirty:l,ctx:n}),e.$set(u);const o={};l&1048579&&(o.$$scope={dirty:l,ctx:n}),r.$set(o)},i(n){s||(L(e.$$.fragment,n),L(r.$$.fragment,n),s=!0)},o(n){I(e.$$.fragment,n),I(r.$$.fragment,n),s=!1},d(n){W(e,n),n&&a(t),W(r,n)}}}function Je(h){let e,t;return e=new Ce({props:{style:"underline",$$slots:{default:[Ie]},$$scope:{ctx:h}}}),{c(){F(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,s){K(e,r,s),t=!0},p(r,[s]){const n={};s&1048607&&(n.$$scope={dirty:s,ctx:r}),e.$set(n)},i(r){t||(L(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){W(e,r)}}}function Me(h,e,t){let r=null,s,n,l,u="",o={},d={},i=0,g=[],b=!1,U=0,D=0;Se.subscribe(p=>{s=p}),ue.subscribe(p=>{u=p}),de.subscribe(p=>{g=p}),te.subscribe(p=>{d=p});function C(){t(2,b=!1),t(3,U=0),t(4,D=0)}async function N(p){const E=p.target.files[0];if(E){if(r=E,s){const M=s.match(/.{1,2}/g).map(v=>parseInt(v,16));l=new Uint8Array(M)}const A=new FileReader;A.onload=R=>{const M=new Uint8Array(R.target.result);n=new Uint8Array(M.length+l.length),n.set(l,0),n.set(M,l.length)},A.readAsArrayBuffer(E)}}async function J(){r&&(t(2,b=!0),n.length-l.length<120?t(4,D=1):(await fetch(window.location.origin+"/uploadConfig",{method:"POST",body:n,headers:{"Content-Type":"application/octet-stream"}})).status==200?(t(3,U=1),console.log("200 OK")):t(4,D=1))}async function y(){try{const p=await fetch(window.location.origin+"/downloadConfig",{method:"POST",body:l});if(p.status==200){const E=await p.blob(),A="EW50v.config",R=document.createElement("a");R.href=URL.createObjectURL(E),R.download=A,R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R)}}catch(p){console.error("Error exporting file:",p)}}async function T(){const p=await fetch(window.location.origin+"/getconFiguraTionData",{method:"POST",body:l});p.status==200&&(u=await p.json(),console.log(u),ue.set(u),t(0,o=JSON.parse(JSON.stringify(u))),d=JSON.parse(JSON.stringify(u)),te.set(d),t(1,i=1))}function B(){if(console.log(`Save p2e\r
`),g.length!=0&&(g=[]),o.config.system_configuration.p2eService!=u.config.system_configuration.p2eService){let p="P2E service is changed to "+o.config.system_configuration.p2eService;g=[...g,p]}de.set(g),d=JSON.parse(JSON.stringify(o)),te.set(d),console.log(g)}ye(()=>{console.log("configuration sessionid: "),console.log(s);const E=s.match(/.{1,2}/g).map(A=>parseInt(A,16));l=new Uint8Array(E),s&&u==""?T():s&&u!=""&&(g.length==0?t(0,o=JSON.parse(JSON.stringify(u))):t(0,o=JSON.parse(JSON.stringify(d))),t(1,i=1))});function P(p){b=p,t(2,b)}function w(p){h.$$.not_equal(o.config.system_configuration.p2eService,p)&&(o.config.system_configuration.p2eService=p,t(0,o))}return[o,i,b,U,D,C,N,J,y,B,P,w]}class tt extends ve{constructor(e){super(),we(this,e,Me,Je,ke,{})}}export{tt as default};
